<!DOCTYPE html>
<html  lang="en">
<head>
    <meta charset="utf-8" />

<meta name="generator" content="Hexo 3.9.0" />

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

<title>Chapter 58 DAO设计模式_分层设计思想 - 姣姣的个人主页</title>


    <meta name="description" content="DAO设计模式_分层设计思想，业务层与数据层的开发。">
<meta name="keywords" content="Java">
<meta property="og:type" content="article">
<meta property="og:title" content="Chapter 58 DAO设计模式_分层设计思想">
<meta property="og:url" content="http://yoursite.com/2018/11/05/Java_58_DAO设计模式_分层设计思想/index.html">
<meta property="og:site_name" content="姣姣的个人主页">
<meta property="og:description" content="DAO设计模式_分层设计思想，业务层与数据层的开发。">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://yoursite.com/images/og_image.png">
<meta property="og:updated_time" content="2018-11-07T05:55:22.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 58 DAO设计模式_分层设计思想">
<meta name="twitter:description" content="DAO设计模式_分层设计思想，业务层与数据层的开发。">
<meta name="twitter:image" content="http://yoursite.com/images/og_image.png">







<link rel="icon" href="/images/favicon.svg">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">


    
    
<style>body>.footer,body>.navbar,body>.section{opacity:0}</style>

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">

    
    
    
    
<link rel="stylesheet" href="/css/back-to-top.css">

    
    
    
    
    
    
    
    <link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
    
    
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.png" alt="Chapter 58 DAO设计模式_分层设计思想" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">Home</a>
                
                <a class="navbar-item"
                href="/archives">Archives</a>
                
                <a class="navbar-item"
                href="/categories">Categories</a>
                
                <a class="navbar-item"
                href="/tags">Tags</a>
                
                <a class="navbar-item"
                href="/about">About</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    <a class="navbar-item" target="_blank" title="Download on GitHub" href="https://github.com/fjiao9614/fjiao9614.github.io">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="Search" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main">
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-11-04T16:00:00.000Z">2018-11-05</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Java8-编程开发入门笔记/">Java8 编程开发入门笔记</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    an hour read (About 8208 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                Chapter 58 DAO设计模式_分层设计思想
            
        </h1>
        <div class="content">
            <p>DAO设计模式_分层设计思想，业务层与数据层的开发。</p>
<a id="more"></a>

<h3 id="DAO-设计模式-分层设计思想"><a href="#DAO-设计模式-分层设计思想" class="headerlink" title="DAO 设计模式-分层设计思想"></a>DAO 设计模式-分层设计思想</h3><h4 id="1-分层设计思想"><a href="#1-分层设计思想" class="headerlink" title="1. 分层设计思想"></a>1. 分层设计思想</h4><ol>
<li>程序的分层<br>每一层都是独立的，可以与其他层进行完整的交互。<br><img src="Image_Java_58_DAO%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_%E5%88%86%E5%B1%82%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/2018-11-01-20-24-21.png" alt></li>
</ol>
<p>整个项目中，后台业务层是最核心的部分。<br>业务层是整个程序提供的操作功能，一个业务层的操作要完成需要多个数据层的操作一起完成。<br>整个过程中：发现数据库完成的只是一个个原子性的数据开发库。在实际的开发中，每个业务要牵扯到多个原子性的操作，也就是说所有的原子性的操作业务最终在业务层完成。<br><img src="Image_Java_58_DAO%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_%E5%88%86%E5%B1%82%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/2018-11-01-20-53-37.png" alt></p>
<p><strong>数据层</strong>：又被称为数据访问层（Data Access Object，DAO），是专门进行数据库的原子性操作，也就是说在数据层之中最需要控制的就是 JDBC 中的 PreparedStatement 接口的使用；</p>
<p><strong>业务层</strong>：又被称为业务对象（Business Object，BO），但是现在又有一部分认为应该将其成为服务层（Service），业务层核心的目的是调用多个数据层的操作以完成整体的项目的业务设计，这个是整个项目的核心所在。</p>
<h4 id="2-业务设计实例"><a href="#2-业务设计实例" class="headerlink" title="2. 业务设计实例"></a>2. 业务设计实例</h4><p>现在要求使用 emp 表（empno、ename、job、hiredate、sal、comm）实现如下的操作功能：</p>
<ul>
<li>【业务层】：实现雇员数据的添加，但是需要保证被添加的雇员编号不会重复；<ul>
<li>【数据层】：判断要增加的雇员编号是否存在；</li>
<li>【数据层】：如果雇员编号不存在则进行数据的保存操作</li>
</ul>
</li>
<li>【业务层】：实现雇员数据的修改操作<ul>
<li>【数据层】：执行数据的修改操作</li>
</ul>
</li>
<li>【业务层】：实现多个雇员数据的删除操作<ul>
<li>【数据层】：执行雇员的执行删除操作</li>
</ul>
</li>
<li>【业务层】：可以根据雇员编号查找到一个雇员的信息<ul>
<li>【数据层】：根据雇员编号查询指定的雇员数据</li>
</ul>
</li>
<li>【业务层】：可以查询所有雇员的信息<ul>
<li>【数据层】：查询全部雇员数据</li>
</ul>
</li>
<li>【业务层】：可以实现数据的分页显示（模糊查询），同时又可以返回所有的雇员的数量<ul>
<li>【数据层】：雇员数据的分页查询；</li>
<li>【数据层】：使用 COUNT() 函数统计出所有的雇员数量</li>
</ul>
</li>
</ul>
<p><strong>结论</strong>：用户所提出的所有的需求都应该划分为业务层，因为他指的是功能，而开发人员必须要根据业务层进行数据层的设计。</p>
<p>开发人员必须要根据业务层进行数据层的设计。</p>
<h4 id="3-数据库连接类"><a href="#3-数据库连接类" class="headerlink" title="3. 数据库连接类"></a>3. 数据库连接类</h4><ol>
<li>项目准备</li>
</ol>
<p>首先可以设置一个项目名称：DAOProject，并且由于此项目需要使用 Oracle 数据库，需要为其配置好驱动程序。请保证数据库已经打开监听与实例服务。s</p>
<p>为了方便统一管理，父包定义为：cn.mldn，子包要根据不同的功能模块进行划分</p>
<ol start="2">
<li>数据库连接类<br>数据库连接对象的取得和数据库关闭操作。<br><img src="Image_Java_58_DAO%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_%E5%88%86%E5%B1%82%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/2018-11-01-21-19-03.png" alt><br>保存在 dbc 子包中。<br>构造方法中实现数据库的连接。</li>
</ol>
<p>示例：定义数据库的专属连接类：</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> cn.mldn.dbc;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="hljs-keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="hljs-keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment"> * 本类专门负责数据库的连接与关闭操作，在实例化本类对象时就意味着要进行数据的开发</span></span><br><span class="line"><span class="hljs-comment"> * 所以在本类的构造方法里要进行数据库驱动加载与数据库连接取得</span></span><br><span class="line"><span class="hljs-comment"> */</span></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DatabaseConnection</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String DBDRIVER = <span class="hljs-string">"com.mysql.jdbc.Driver"</span>;</span><br><span class="line">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String DBURL = <span class="hljs-string">"jdbc:mysql://localhost:3306/test?characterEncoding=UTF-8"</span>;</span><br><span class="line">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String USER = <span class="hljs-string">"root"</span>;</span><br><span class="line">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String PASS = <span class="hljs-string">"admin"</span>;</span><br><span class="line">    <span class="hljs-keyword">private</span> Connection connection = <span class="hljs-keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 在构造方法里面为 conn 对象进行实例化，可以直接取得数据库的连接对象</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">DatabaseConnection</span><span class="hljs-params">(Connection conn)</span> </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">try</span>&#123;</span><br><span class="line">            Class.forName(DBDRIVER);</span><br><span class="line">            <span class="hljs-keyword">this</span>.connection = DriverManager.getConnection(DBURL,USER,PASS);</span><br><span class="line">        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;   <span class="hljs-comment">// 此处虽然有异常，但是抛出的意义不大</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 取得一个数据库的连接对象</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> Connection 实例化对象</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> Connection <span class="hljs-title">getConnection</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.connection;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 负责数据库关闭</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">close</span><span class="hljs-params">()</span></span>&#123;</span><br><span class="line">        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.connection != <span class="hljs-keyword">null</span>)&#123;    <span class="hljs-comment">// 表示现在有连接对象</span></span><br><span class="line">            <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">                <span class="hljs-keyword">this</span>.connection.close();</span><br><span class="line">            &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>初始设计</p>
<p>额外话题：从最早的 DAO 设计模式来讲实际上还会考虑到一个问题，多数据库间的移植问题，此时就需要设置一个专门的表示连接标准的接口。</p>
<p><img src="Image_Java_58_DAO%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_%E5%88%86%E5%B1%82%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/2018-11-02-08-48-44.png" alt></p>
<p>考虑到现实开发中，第三方框架越来越完善，以上复杂的设计几乎不出现了。</p>
<h5 id="4-开发-Value-Object-VO-类"><a href="#4-开发-Value-Object-VO-类" class="headerlink" title="4. 开发 Value Object   VO 类"></a>4. 开发 Value Object   VO 类</h5><p><img src="Image_Java_58_DAO%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_%E5%88%86%E5%B1%82%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/2018-11-02-08-53-59.png" alt></p>
<p>在实际的工作之中，针对于简单 Java 类的开发给出如下的要求：</p>
<ul>
<li>考虑到日后程序有可能出现的分布式应用问题，所以简单 Java 类必须要实现 java.io.Serializable 接口；</li>
<li>简单 Java 类的名称必须与表名称保持一致；<ul>
<li>有可能采用这样的名字：student_info，类名称为：StudentInfo；</li>
</ul>
</li>
<li>类中的属性不允许使用基本数据类型，都必须使用基本数据类型的包装类；<ul>
<li>基本数据类型的数值型默认值是 0，而如果是包装类默认值就是 null；</li>
</ul>
</li>
<li>类中的属性必须使用 private 封装，封装后的属性必须提供有 setter、getter 方法</li>
<li>类中可以定义有多个构造方法，但是必须要保留有一个无参构造方法；</li>
<li>【可选要求，基本不用】：覆写 equals()、toString()、hashCode();<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE IF NOT EXISTS emp(</span><br><span class="line">    empno     INT NOT NULL AUTO_INCREMENT,</span><br><span class="line">    ename    VARCHAR(20),</span><br><span class="line">    job     VARCHAR(20),</span><br><span class="line">    hiredate DATE,</span><br><span class="line">    sal     DOUBLE,</span><br><span class="line">    comm    DOUBLE,</span><br><span class="line">    PRIMARY KEY(empno)</span><br><span class="line">)DEFAULT CHARSET=utf8;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>将所有的简单 Java 类保存在 vo 包中。</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> cn.mldn.vo;</span><br><span class="line"><span class="hljs-keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.Date;</span><br><span class="line"><span class="hljs-comment">// ("serial") 是序列化警告，当实现了序列化接口的类上缺少serialVersionUID属性的定义时，会出现黄色警告。可以使用@SuppressWarnings将警告关闭</span></span><br><span class="line"><span class="hljs-meta">@SuppressWarnings</span>(<span class="hljs-string">"serial"</span>)</span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Emp</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">private</span> Integer empno;</span><br><span class="line">    <span class="hljs-keyword">private</span> String ename;</span><br><span class="line">    <span class="hljs-keyword">private</span> String job;</span><br><span class="line">    <span class="hljs-keyword">private</span> Date hiredate;</span><br><span class="line">    <span class="hljs-keyword">private</span> Double sal;</span><br><span class="line">    <span class="hljs-keyword">private</span> Double comm;</span><br><span class="line">    <span class="hljs-comment">// setter、getter 方法省略</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>不管有多少张表，只要是实体表，那么一定要写简单 Java 类，而且不要试图想要一次性将所有的表都转换到位。</p>
<h3 id="数据层"><a href="#数据层" class="headerlink" title="数据层"></a>数据层</h3><h4 id="5-数据层接口，开发数据层"><a href="#5-数据层接口，开发数据层" class="headerlink" title="5. 数据层接口，开发数据层"></a>5. 数据层接口，开发数据层</h4><p>数据层最终是交给业务层进行调用的，所有业务层必须知道数据层的执行标准，即：业务层需要明确的知道数据层。</p>
<ol>
<li>开发数据层操作标准<br><img src="Image_Java_58_DAO%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_%E5%88%86%E5%B1%82%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/2018-11-02-09-03-06.png" alt></li>
</ol>
<p>【<strong>重点</strong>】：<br>对于数据层的接口给出如下的开发要求：</p>
<ul>
<li>数据层既然是进行数据操作的，那么就将其保存在 dao 包下；</li>
<li>既然不同的数据表的操作有可能使用不同的数据层开发，那么就针对数据表进行命名<ul>
<li>emp 表，那么数据层的接口就应该定义为 IEmpDAO；</li>
</ul>
</li>
<li>对于整个数据层的开发严格来讲就只有两类功能：<ul>
<li>数据更新：建议他的操作方法以 doXxx() 的姓氏命名，例如 doCreate()、doUpdate()、doRemove()；</li>
<li>数据查询：对于查询分为两种形式：<ul>
<li>查询表中数据：以 findXxx() 形式命名，例如 findById()、findByName()、findAll()；</li>
<li>统计表中的数据：以 getXxx() 形式命名，例如 getAllCount()</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>示例</strong>：编写 EMP 表</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> cn.mldn.dao;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> cn.mldn.vo.Emp;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.List;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.Set;</span><br><span class="line"><span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment"> * 定义 emp 表的数据层的操作标准</span></span><br><span class="line"><span class="hljs-comment"> */</span></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IEmpDAO</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 实现数据的增加操作</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> vo 包含了要增加数据的 VO 对象</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 数据保存成功返回 true，否则返回 false</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception SQL 执行异常</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">doCreate</span><span class="hljs-params">(Emp vo)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 实现数据的修改操作，本次修改是根据 id 进行全部字段的修改</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> vo 包括了要修改数据的信息，一定要提供有 ID 内容</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 数据修改成功返回 true，否则返回 false</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception SQL 执行异常</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">doUpdate</span><span class="hljs-params">(Emp vo)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 执行数据的批量删除操作，所有要删除的数据以 Set 集合的形式保存</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> ids 包含了所有要删除的数据 ID，不包含重复内容</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 删除成功返回 true（删除的数据个数与要删除的数据个数相同），否则返回 false</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception SQL 执行异常</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">doRemoveBatch</span><span class="hljs-params">(Set&lt;Integer&gt; ids)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 根据雇员编号查询指定的雇员信息</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id 要查询的雇员编号</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 如果雇员信息存在，数据以 VO 类对象的形式返回；如果雇员信息不存在，则返回 null</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception SQL 执行异常</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> Emp <span class="hljs-title">findById</span><span class="hljs-params">(Integer id)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 查询指定数据表的全部记录，并且以集合的形式返回</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 表中有数据，则将数据封装为 VO 类对象然后利用 List 集合返回，&lt;br&gt;</span></span><br><span class="line"><span class="hljs-comment">     * 如果没有数据，那么集合的长度为 0（size() == 0，不是 null）&lt;/&gt;</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception SQL 执行异常</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Emp&gt; <span class="hljs-title">findAll</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 分页进行数据的模糊查询，查询结果以集合的形式返回</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> offset 数据行的偏移量</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> maxNum 数据行的最大数目</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> column 进行模糊查询的数据列</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> keyWord 模糊查询的关键字</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 中有数据，则将数据封装为 VO 类对象然后利用 List 集合返回，&lt;br&gt;</span></span><br><span class="line"><span class="hljs-comment">     * 如果没有数据，那么集合的长度为 0（size() == 0，不是 null）&lt;/&gt;</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception SQL 执行异常</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Emp&gt; <span class="hljs-title">findAllSplit</span><span class="hljs-params">(Integer offset,Integer maxNum,String column,String keyWord)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 进行模糊查询数据量的统计，如果表中没有记录统计的结果就是 0</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> column 进行模糊查询的数据列</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> keyWord 模糊查询的关键字</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 返回表中的数据量，如果没有数据就返回 0</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception SQL 执行异常</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getAllCount</span><span class="hljs-params">(String column,String keyWord)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>示意图：</p>
<p><img src="Image_Java_58_DAO%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_%E5%88%86%E5%B1%82%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/2018-11-02-13-40-08.png" alt></p>
<h4 id="6-数据实现类"><a href="#6-数据实现类" class="headerlink" title="6. 数据实现类"></a>6. 数据实现类</h4><p>数据层需要被业务层调用，数据层需要进行数据库的执行（PreparedStatement），要执行多个数据层的调用，所以数据库的打开与关闭操作应该由业务层控制。</p>
<p>所有的数据层实现类要求保存在 dao.impl 子包下。</p>
<p><strong>范例</strong>：EmpDAOImpl 子类</p>
<p>不用关闭，关闭给业务层做。</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> cn.mldn.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> cn.mldn.dao.IEmpDAO;</span><br><span class="line"><span class="hljs-keyword">import</span> cn.mldn.vo.Emp;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="hljs-keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="hljs-keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.List;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EmpDAOImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IEmpDAO</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">private</span> Connection conn;</span><br><span class="line">    <span class="hljs-keyword">private</span> PreparedStatement pstmt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 如果想要使用数据层进行原子性的功能操作实现，必须要提供有 Connection 接口对象</span></span><br><span class="line"><span class="hljs-comment">     * 另外，由于开发之中业务层要调用数据层，所以数据库的打开与关闭交由业务层处理</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> conn 表示数据库的连接对象</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">EmpDAOImpl</span><span class="hljs-params">(Connection conn)</span></span>&#123;</span><br><span class="line">        <span class="hljs-keyword">this</span>.conn = conn;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">doCreate</span><span class="hljs-params">(Emp vo)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        String sql = <span class="hljs-string">"INSERT INTO emp(empno,ename,job,hiredate,sal,comm) VALUES(?,?,?,?,?,?)"</span>;</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt = <span class="hljs-keyword">this</span>.conn.prepareStatement(sql);</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setInt(<span class="hljs-number">1</span>,vo.getEmpno());</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setString(<span class="hljs-number">2</span>,vo.getEname());</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setString(<span class="hljs-number">3</span>,vo.getJob());</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setDate(<span class="hljs-number">4</span>,<span class="hljs-keyword">new</span> java.sql.Date(vo.getHiredate().getTime()));</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setDouble(<span class="hljs-number">5</span>,vo.getSal());</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setDouble(<span class="hljs-number">6</span>,vo.getComm());</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.pstmt.executeUpdate() &gt; <span class="hljs-number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">doUpdate</span><span class="hljs-params">(Emp vo)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        String sql = <span class="hljs-string">"UPDATE emp SET ename=?,job=?,hiredate=?,sal=?,comm=? WHERE empno=?"</span>;</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt = <span class="hljs-keyword">this</span>.conn.prepareStatement(sql);</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setString(<span class="hljs-number">1</span>,vo.getEname());</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setString(<span class="hljs-number">2</span>,vo.getJob());</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setDate(<span class="hljs-number">3</span>,<span class="hljs-keyword">new</span> java.sql.Date(vo.getHiredate().getTime()));</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setDouble(<span class="hljs-number">4</span>,vo.getSal());</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setDouble(<span class="hljs-number">5</span>,vo.getComm());</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setInt(<span class="hljs-number">6</span>,vo.getEmpno());</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.pstmt.executeUpdate() &gt; <span class="hljs-number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">doRemoveBatch</span><span class="hljs-params">(Set&lt;Integer&gt; ids)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">if</span>(ids == <span class="hljs-keyword">null</span> || ids.size() == <span class="hljs-number">0</span>)&#123; <span class="hljs-comment">// 没有要删除的数据</span></span><br><span class="line">            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        StringBuffer sql = <span class="hljs-keyword">new</span> StringBuffer();</span><br><span class="line">        sql.append(<span class="hljs-string">"DELETE FROM emp WHERE empno IN ("</span>);</span><br><span class="line">        Iterator&lt;Integer&gt; iter = ids.iterator();</span><br><span class="line">        <span class="hljs-keyword">while</span>(iter.hasNext())&#123;</span><br><span class="line">            sql.append(iter.next()).append(<span class="hljs-string">","</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        sql.delete(sql.length()-<span class="hljs-number">1</span>,sql.length()).append(<span class="hljs-string">")"</span>);</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt = <span class="hljs-keyword">this</span>.conn.prepareStatement(sql.toString());</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.pstmt.executeUpdate() == ids.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> Emp <span class="hljs-title">findById</span><span class="hljs-params">(Integer id)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Emp vo = <span class="hljs-keyword">null</span>;</span><br><span class="line">        String sql = <span class="hljs-string">"SELECT empno,ename,job,hiredate,sal,comm FROM emp WHERE empno=?"</span>;</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt = <span class="hljs-keyword">this</span>.conn.prepareStatement(sql);</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setInt(<span class="hljs-number">1</span>,id);</span><br><span class="line">        ResultSet rs = <span class="hljs-keyword">this</span>.pstmt.executeQuery();</span><br><span class="line">        <span class="hljs-keyword">while</span>(rs.next())&#123;</span><br><span class="line">            vo = <span class="hljs-keyword">new</span> Emp();</span><br><span class="line">            vo.setEmpno(rs.getInt(<span class="hljs-number">1</span>));</span><br><span class="line">            vo.setEname(rs.getString(<span class="hljs-number">2</span>));</span><br><span class="line">            vo.setJob(rs.getString(<span class="hljs-number">3</span>));</span><br><span class="line">            vo.setHiredate(rs.getDate(<span class="hljs-number">4</span>));</span><br><span class="line">            vo.setSal(rs.getDouble(<span class="hljs-number">5</span>));</span><br><span class="line">            vo.setComm(rs.getDouble(<span class="hljs-number">6</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="hljs-keyword">return</span> vo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Emp&gt; <span class="hljs-title">findAll</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        List&lt;Emp&gt; all = <span class="hljs-keyword">new</span> ArrayList&lt;Emp&gt;();</span><br><span class="line">        String sql = <span class="hljs-string">"SELECT empno,ename,job,hiredate,sal,comm FROM emp"</span>;</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt = <span class="hljs-keyword">this</span>.conn.prepareStatement(sql);</span><br><span class="line">        ResultSet rs = <span class="hljs-keyword">this</span>.pstmt.executeQuery();</span><br><span class="line">        <span class="hljs-keyword">while</span>(rs.next())&#123;</span><br><span class="line">            Emp vo = <span class="hljs-keyword">new</span> Emp();</span><br><span class="line">            vo.setEmpno(rs.getInt(<span class="hljs-number">1</span>));</span><br><span class="line">            vo.setEname(rs.getString(<span class="hljs-number">2</span>));</span><br><span class="line">            vo.setJob(rs.getString(<span class="hljs-number">3</span>));</span><br><span class="line">            vo.setHiredate(rs.getDate(<span class="hljs-number">4</span>));</span><br><span class="line">            vo.setSal(rs.getDouble(<span class="hljs-number">5</span>));</span><br><span class="line">            vo.setComm(rs.getDouble(<span class="hljs-number">6</span>));</span><br><span class="line">            all.add(vo);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="hljs-keyword">return</span> all;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Emp&gt; <span class="hljs-title">findAllSplit</span><span class="hljs-params">(Integer offset, Integer maxNum, String column, String keyWord)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        List&lt;Emp&gt; all = <span class="hljs-keyword">new</span> ArrayList&lt;Emp&gt;();</span><br><span class="line">        String sql = <span class="hljs-string">" SELECT * FROM "</span> +</span><br><span class="line">                <span class="hljs-string">" (SELECT empno,ename,job,hiredate,sal,comm FROM emp WHERE "</span> + column +</span><br><span class="line">                <span class="hljs-string">" LIKE ? ) as total "</span> +</span><br><span class="line">                <span class="hljs-string">" LIMIT ?,? "</span>;</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt = <span class="hljs-keyword">this</span>.conn.prepareStatement(sql);</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setString(<span class="hljs-number">1</span>,<span class="hljs-string">"%"</span>+keyWord+<span class="hljs-string">"%"</span>);</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setInt(<span class="hljs-number">2</span>,offset);</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setInt(<span class="hljs-number">3</span>,maxNum);</span><br><span class="line">        ResultSet rs = <span class="hljs-keyword">this</span>.pstmt.executeQuery();</span><br><span class="line">        <span class="hljs-keyword">while</span>(rs.next())&#123;</span><br><span class="line">            Emp vo = <span class="hljs-keyword">new</span> Emp();</span><br><span class="line">            vo.setEmpno(rs.getInt(<span class="hljs-number">1</span>));</span><br><span class="line">            vo.setEname(rs.getString(<span class="hljs-number">2</span>));</span><br><span class="line">            vo.setJob(rs.getString(<span class="hljs-number">3</span>));</span><br><span class="line">            vo.setHiredate(rs.getDate(<span class="hljs-number">4</span>));</span><br><span class="line">            vo.setSal(rs.getDouble(<span class="hljs-number">5</span>));</span><br><span class="line">            vo.setComm(rs.getDouble(<span class="hljs-number">6</span>));</span><br><span class="line">            all.add(vo);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="hljs-keyword">return</span> all;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getAllCount</span><span class="hljs-params">(String column, String keyWord)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        String sql = <span class="hljs-string">"SELECT COUNT(empno) FROM emp WHERE "</span> + column + <span class="hljs-string">" LIKE ?"</span> ;</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt = <span class="hljs-keyword">this</span>.conn.prepareStatement(sql);</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setString(<span class="hljs-number">1</span>,<span class="hljs-string">"%"</span>+keyWord+<span class="hljs-string">"%"</span>);</span><br><span class="line">        ResultSet rs = <span class="hljs-keyword">this</span>.pstmt.executeQuery();</span><br><span class="line">        <span class="hljs-keyword">while</span>(rs.next())&#123;</span><br><span class="line">            <span class="hljs-keyword">return</span> rs.getInt(<span class="hljs-number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>子类里面唯一要注意的就是要接收一个 Connection 接口对象。</p>
<p><img src="Image_Java_58_DAO%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_%E5%88%86%E5%B1%82%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/2018-11-02-15-21-16.png" alt></p>
<h5 id="7-定义数据层工厂类-–-DAOFactory"><a href="#7-定义数据层工厂类-–-DAOFactory" class="headerlink" title="7. 定义数据层工厂类 – DAOFactory"></a>7. 定义数据层工厂类 – DAOFactory</h5><p>业务层要想进行数据层的调用，那么必须要取得 IEmpDAO 接口对象，但是不同层之间如果想要取得接口对象示例，需要使用工厂设计模式，这个工厂类将其保存在 factory 子包下。</p>
<p><strong>示例</strong>：定义工厂类</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> cn.mldn.factory;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> cn.mldn.dao.IEmpDAO;</span><br><span class="line"><span class="hljs-keyword">import</span> cn.mldn.dao.impl.EmpDAOImpl;</span><br><span class="line"><span class="hljs-keyword">import</span> java.sql.Connection;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DAOFactory</span> </span>&#123;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> IEmpDAO <span class="hljs-title">getIEmpDAOInstance</span><span class="hljs-params">(Connection conn)</span></span>&#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> EmpDAOImpl(conn);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用工厂类的特征就是外层不需要知道具体的子类。</p>
<p><img src="Image_Java_58_DAO%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_%E5%88%86%E5%B1%82%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/2018-11-02-15-26-10.png" alt></p>
<h3 id="业务层"><a href="#业务层" class="headerlink" title="业务层"></a>业务层</h3><h4 id="8-开发业务层，业务层接口-IEmpService"><a href="#8-开发业务层，业务层接口-IEmpService" class="headerlink" title="8. 开发业务层，业务层接口 - IEmpService"></a>8. 开发业务层，业务层接口 - IEmpService</h4><p>业务层也可以成为 Service 层，既然描述的是 emp 表的操作，所以名称就定义为 IEmpService，并且保存在 service 子包下，但是对于业务层的方法定义没有明确的要求。（建议有一定的规范！）</p>
<p>注意：数据层使用包装类，业务层使用基本类型<br>delete(Set<integer> ids) 只能使用包装类</integer></p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> cn.mldn.service;</span><br><span class="line"><span class="hljs-keyword">import</span> cn.mldn.vo.Emp;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.List;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.Map;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment"> * 定义 emp 表的业务层的执行标准，此类一定要负责数据库的打开与关闭操作</span></span><br><span class="line"><span class="hljs-comment"> * 此类可以通过 DAOFactory 类取得 IEmpDAO 接口对象</span></span><br><span class="line"><span class="hljs-comment"> */</span></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IEmpService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 实现雇员数据的增加操作，本次要调用 IEmpDAO 接口中的如下方法：&lt;br&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;li&gt;需要调用 IEmpDAO.findById() 方法，判断要增加数据的 id 是否存在&lt;/&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;li&gt;如果现在要增加的数据编号不存在则调用 IEmpDAO.doCreate() 方法，返回操作结果&lt;/li&gt;</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> vo 包含了要增加数据的 VO 对象</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>  如果要增加数据的 ID 重复或者保存失败则返回 false，否则返回 true</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception SQL 执行异常</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">insert</span><span class="hljs-params">(Emp vo)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 实现雇员数据的修改操作，本次要调用 IEmpDAO.doUpdate() 方法，本次修改属于全部内容修改</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> vo 包含了要修改数据的 VO 对象</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 修改成功返回 true，否则返回 false</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception SQL 执行异常</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">update</span><span class="hljs-params">(Emp vo)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 执行雇员数据的删除操作，可以删除多个雇员信息，调用 IEmpDAO.doRemoveBatch() 方法</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> ids 包含了全部要删除数据的集合，没有重复数据</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 删除成功返回 true，否则返回 false</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception SQL 执行异常</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">delete</span><span class="hljs-params">(Set&lt;Integer&gt; ids)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 根据雇员编号查找雇员的完整信息，调用 IEmpDAO.findById() 方法</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> ids 要查找的雇员编号</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 如果找到了则雇员信息以 VO 对象返回，否则返回 null</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception SQL 执行异常</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> Emp <span class="hljs-title">get</span><span class="hljs-params">(<span class="hljs-keyword">int</span> ids)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 查询全部雇员信息，调用 IEmpDAO.findAll() 方法</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 查询结果以 List 集合形式返回，如果没有数据则返回集合的长度为 0</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception SQL 执行异常</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Emp&gt; <span class="hljs-title">list</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 实现数据的模糊查询与数据统计，调用 IEmpDAO 中的两个方法&lt;br&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;li&gt;调用 IEmpDAO.findAllSplit() 方法，查询出所有的表数据，返回 List&lt;Emp&gt; &lt;/&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;li&gt;调用 IEmpDAO.getAllCount() 方法，查询所有的数据量，返回的 Integer &lt;/&gt;&lt;/&gt;</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> offset 数据行的偏移量</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> maxNum 数据行的最大数目</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> column 进行模糊查询的数据列</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> keyWord 模糊查询的关键字</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 本方法需要返回多种数据类型，所以使用 Map 集合返回，由于类型不统一，所有 value 的类型设置为以下两种：&lt;br&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;li&gt;key = allEmps, value = IEmpDAO.findAllSplit() 返回结果，List&lt;Emp&gt;;&lt;/&gt;</span></span><br><span class="line"><span class="hljs-comment">     * &lt;li&gt;key = empCount, value = IEmpDAO.getAllCount() 返回结果，Integer &lt;/&gt;&lt;/&gt;</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception SQL 执行异常</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> Map&lt;String,Object&gt; <span class="hljs-title">list</span><span class="hljs-params">(<span class="hljs-keyword">int</span> offset,<span class="hljs-keyword">int</span> maxNum,String column,String keyWord)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="9-业务层实现类"><a href="#9-业务层实现类" class="headerlink" title="9. 业务层实现类"></a>9. 业务层实现类</h4><p>业务层实现类的核心功能：</p>
<ul>
<li>负责控制数据库的打开和关闭：当存在了业务层对象后其目的就是为操作数据库，即：业务层对象实例化之后就必须准备好数据连接；</li>
<li>根据 DAOFactory 调用 getIEmpDAOInstance() 方法 而后取得 IEmpDAO 接口对象</li>
</ul>
<p>业务层的实现类保存在 dao.impl 子包中。</p>
<p><strong>示例</strong>：定义 EmpServiceImpl 子类</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> cn.mldn.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> cn.mldn.dbc.DatabaseConnection;</span><br><span class="line"><span class="hljs-keyword">import</span> cn.mldn.factory.DAOFactory;</span><br><span class="line"><span class="hljs-keyword">import</span> cn.mldn.service.IEmpService;</span><br><span class="line"><span class="hljs-keyword">import</span> cn.mldn.vo.Emp;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.List;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.Map;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EmpServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IEmpService</span> </span>&#123;</span><br><span class="line">    <span class="hljs-comment">// 在这个类的对象内部提供有一个数据库连接类的实例化对象</span></span><br><span class="line">    <span class="hljs-keyword">private</span> DatabaseConnection dbc = <span class="hljs-keyword">new</span> DatabaseConnection();</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">insert</span><span class="hljs-params">(Emp vo)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">try</span>&#123;</span><br><span class="line">            <span class="hljs-comment">// 要增加的雇员编号如果不存在，则 findById() 返回的结果就是 null，null 表示可以进行新雇员数据的保存</span></span><br><span class="line">            <span class="hljs-keyword">if</span>(DAOFactory.getIEmpDAOInstance(<span class="hljs-keyword">this</span>.dbc.getConnection()).findById(vo.getEmpno()) == <span class="hljs-keyword">null</span>)&#123;</span><br><span class="line">                <span class="hljs-keyword">return</span> DAOFactory.getIEmpDAOInstance(<span class="hljs-keyword">this</span>.dbc.getConnection()).doCreate(vo);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;</span><br><span class="line">        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            <span class="hljs-keyword">throw</span> e;</span><br><span class="line">        &#125;<span class="hljs-keyword">finally</span> &#123;</span><br><span class="line">            <span class="hljs-keyword">this</span>.dbc.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">update</span><span class="hljs-params">(Emp vo)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">try</span>&#123;</span><br><span class="line">            <span class="hljs-keyword">return</span> DAOFactory.getIEmpDAOInstance(<span class="hljs-keyword">this</span>.dbc.getConnection()).doUpdate(vo);</span><br><span class="line">        &#125;<span class="hljs-keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            <span class="hljs-keyword">throw</span> e;</span><br><span class="line">        &#125;<span class="hljs-keyword">finally</span> &#123;</span><br><span class="line">            <span class="hljs-keyword">this</span>.dbc.close();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">delete</span><span class="hljs-params">(Set&lt;Integer&gt; ids)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">            <span class="hljs-keyword">return</span> DAOFactory.getIEmpDAOInstance(<span class="hljs-keyword">this</span>.dbc.getConnection()).doRemoveBatch(ids);</span><br><span class="line">        &#125;<span class="hljs-keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            <span class="hljs-keyword">throw</span> e;</span><br><span class="line">        &#125;<span class="hljs-keyword">finally</span> &#123;</span><br><span class="line">            <span class="hljs-keyword">this</span>.dbc.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> Emp <span class="hljs-title">get</span><span class="hljs-params">(<span class="hljs-keyword">int</span> ids)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">try</span>&#123;</span><br><span class="line">            <span class="hljs-keyword">return</span> DAOFactory.getIEmpDAOInstance(<span class="hljs-keyword">this</span>.dbc.getConnection()).findById(ids);</span><br><span class="line">        &#125;<span class="hljs-keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            <span class="hljs-keyword">throw</span> e;</span><br><span class="line">        &#125;<span class="hljs-keyword">finally</span>&#123;</span><br><span class="line">            <span class="hljs-keyword">this</span>.dbc.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Emp&gt; <span class="hljs-title">list</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">try</span>&#123;</span><br><span class="line">            <span class="hljs-keyword">return</span> DAOFactory.getIEmpDAOInstance(<span class="hljs-keyword">this</span>.dbc.getConnection()).findAll();</span><br><span class="line">        &#125;<span class="hljs-keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            <span class="hljs-keyword">throw</span> e;</span><br><span class="line">        &#125;<span class="hljs-keyword">finally</span>&#123;</span><br><span class="line">            <span class="hljs-keyword">this</span>.dbc.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title">list</span><span class="hljs-params">(<span class="hljs-keyword">int</span> offset, <span class="hljs-keyword">int</span> maxNum, String column, String keyWord)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">try</span>&#123;</span><br><span class="line">            Map&lt;String,Object&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line">            map.put(<span class="hljs-string">"allEmps"</span>,DAOFactory.getIEmpDAOInstance(<span class="hljs-keyword">this</span>.dbc.getConnection()).findAllSplit(offset,maxNum,column,keyWord));</span><br><span class="line">            map.put(<span class="hljs-string">"empCount"</span>,DAOFactory.getIEmpDAOInstance(<span class="hljs-keyword">this</span>.dbc.getConnection()).getAllCount(column,keyWord));</span><br><span class="line">            <span class="hljs-keyword">return</span> map;</span><br><span class="line">        &#125;<span class="hljs-keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            <span class="hljs-keyword">throw</span> e;</span><br><span class="line">        &#125;<span class="hljs-keyword">finally</span>&#123;</span><br><span class="line">            <span class="hljs-keyword">this</span>.dbc.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>不同层之间的访问依靠的就是工厂类和接口进行操作。</p>
<p>【技巧】：只要写接口，取得对象就使用工厂。</p>
<p><img src="Image_Java_58_DAO%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_%E5%88%86%E5%B1%82%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/2018-11-04-15-36-20.png" alt></p>
<h4 id="10-定义业务层的工厂类：ServiceFactory"><a href="#10-定义业务层的工厂类：ServiceFactory" class="headerlink" title="10. 定义业务层的工厂类：ServiceFactory"></a>10. 定义业务层的工厂类：ServiceFactory</h4><p>业务层最终依然需要被其他的层所使用，所以需要为其定义工厂类，该类也同样保存在 factory 子包下，从开发角度来讲，业务层应该分为两种：</p>
<ul>
<li>前台业务逻辑：可以将其保存在 service.front 包中，工厂类：ServiceFrontFactory</li>
<li>后台业务逻辑：可以将其保存在 service.back 包中，工厂类：ServiceBackFactory。</li>
</ul>
<p><strong>示例</strong>：定义 ServiceFactory</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> cn.mldn.factory;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> cn.mldn.dao.impl.EmpServiceImpl;</span><br><span class="line"><span class="hljs-keyword">import</span> cn.mldn.service.IEmpService;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ServiceFactory</span> </span>&#123;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> IEmpService <span class="hljs-title">getIEmpServiceInstance</span><span class="hljs-params">()</span></span>&#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> EmpServiceImpl();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="Image_Java_58_DAO%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_%E5%88%86%E5%B1%82%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/2018-11-04-15-40-41.png" alt></p>
<h3 id="业务测试"><a href="#业务测试" class="headerlink" title="业务测试"></a>业务测试</h3><h4 id="11-调用测试"><a href="#11-调用测试" class="headerlink" title="11. 调用测试"></a>11. 调用测试</h4><p><strong>示例</strong>：数据插入测试</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> cn.mldn.cn.mldn.test;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> cn.mldn.factory.ServiceFactory;</span><br><span class="line"><span class="hljs-keyword">import</span> cn.mldn.vo.Emp;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestEmpInsert</span> </span>&#123;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String args[])</span></span>&#123;</span><br><span class="line">        Emp vo = <span class="hljs-keyword">new</span> Emp();</span><br><span class="line">        vo.setEmpno(<span class="hljs-number">001</span>);</span><br><span class="line">        vo.setEname(<span class="hljs-string">"Mary"</span>);</span><br><span class="line">        vo.setJob(<span class="hljs-string">"秘书"</span>);</span><br><span class="line">        vo.setHiredate(<span class="hljs-keyword">new</span> Date());</span><br><span class="line">        vo.setSal(<span class="hljs-number">2000.0</span>);</span><br><span class="line">        vo.setComm(<span class="hljs-number">888.0</span>);</span><br><span class="line">        <span class="hljs-keyword">try</span>&#123;</span><br><span class="line">            System.out.println(ServiceFactory.getIEmpServiceInstance().insert(vo));</span><br><span class="line">        &#125;<span class="hljs-keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行第一次返回 true，第二次返回 false（empno 重复，无法插入）</p>
<p><strong>示例</strong>：测试分页查询功能</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> cn.mldn.cn.mldn.test;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> cn.mldn.factory.ServiceFactory;</span><br><span class="line"><span class="hljs-keyword">import</span> cn.mldn.vo.Emp;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.List;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestEmpSplit</span> </span>&#123;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String []args)</span></span>&#123;</span><br><span class="line">        <span class="hljs-keyword">try</span>&#123;</span><br><span class="line">            Map&lt;String,Object&gt; map = ServiceFactory.getIEmpServiceInstance().list(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-string">"ename"</span>,<span class="hljs-string">""</span>);</span><br><span class="line">            <span class="hljs-keyword">int</span> count = (Integer) map.get(<span class="hljs-string">"empCount"</span>);</span><br><span class="line">            System.out.println(<span class="hljs-string">"数据量："</span>+ count);</span><br><span class="line">            List&lt;Emp&gt; all = (List&lt;Emp&gt;) map.get(<span class="hljs-string">"allEmps"</span>);</span><br><span class="line">            Iterator&lt;Emp&gt; iter = all.iterator();</span><br><span class="line">            <span class="hljs-keyword">while</span>(iter.hasNext())&#123;</span><br><span class="line">                Emp vo = iter.next();</span><br><span class="line">                System.out.println(<span class="hljs-string">"姓名："</span> + vo.getEname() + <span class="hljs-string">",职业："</span> + vo.getJob());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="hljs-keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="12-利用-junit-进行测试"><a href="#12-利用-junit-进行测试" class="headerlink" title="12. 利用 junit 进行测试"></a>12. 利用 junit 进行测试</h4><h3 id="深入讲解"><a href="#深入讲解" class="headerlink" title="深入讲解"></a>深入讲解</h3><h4 id="13-实现部门操作"><a href="#13-实现部门操作" class="headerlink" title="13. 实现部门操作"></a>13. 实现部门操作</h4><p><img src="Image_Java_58_DAO%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_%E5%88%86%E5%B1%82%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/2018-11-04-19-29-26.png" alt></p>
<ol>
<li><p>定义 Dept.java<br>实现简单 java 类</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> cn.mldn.vo;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dept</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Serializable</span></span>&#123;</span><br><span class="line">    <span class="hljs-keyword">private</span> Integer deptno;</span><br><span class="line">    <span class="hljs-keyword">private</span> String dname;</span><br><span class="line">    <span class="hljs-keyword">private</span> String loc;</span><br><span class="line">    <span class="hljs-comment">// 省略 setter、getter</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>定义 IDeptDAO 接口<br>几乎所有的数据表都应该具备有基础 CRUD 功能（增加、修改全部、删除数据、根据编号查询、查询全部、分页显示、数据统计），这些功能呢的方法每个接口都要重复定义。<br>在整个 DAO 接口定义过程之中，不同表的区别在于 VO类、主键类型。</p>
</li>
</ol>
<p>定义一个公共父类 IDAO.java</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> cn.mldn.dao;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> java.util.List;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment"> * 定义公共的 DAO 操作接口标准，增加、修改全部、删除数据、根据编号查询、查询全部、分页显示、数据统计</span></span><br><span class="line"><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &lt;K&gt; 表示要操作的主键类型，由子接口实现</span></span><br><span class="line"><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &lt;V&gt; 表示要操作的 VO 类型，由子接口实现</span></span><br><span class="line"><span class="hljs-comment"> */</span></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IDAO</span>&lt;<span class="hljs-title">K</span>,<span class="hljs-title">V</span>&gt; </span>&#123;</span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 实现数据的增加操作</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> vo 包含了要增加数据的 VO 对象</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 数据保存成功返回 true，否则返回 false</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception SQL 执行异常</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">doCreate</span><span class="hljs-params">(V vo)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 实现数据的修改操作，本次修改是根据 id 进行全部字段的修改</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> vo 包括了要修改数据的信息，一定要提供有 ID 内容</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 数据修改成功返回 true，否则返回 false</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception SQL 执行异常</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">doUpdate</span><span class="hljs-params">(V vo)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 执行数据的批量删除操作，所有要删除的数据以 Set 集合的形式保存</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> ids 包含了所有要删除的数据 ID，不包含重复内容</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 删除成功返回 true（删除的数据个数与要删除的数据个数相同），否则返回 false</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception SQL 执行异常</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">doRemoveBatch</span><span class="hljs-params">(Set&lt;K&gt; ids)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 根据雇员编号查询指定的雇员信息</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id 要查询的雇员编号</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 如果雇员信息存在，数据以 VO 类对象的形式返回；如果雇员信息不存在，则返回 null</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception SQL 执行异常</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> V <span class="hljs-title">findById</span><span class="hljs-params">(K id)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 查询指定数据表的全部记录，并且以集合的形式返回</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 表中有数据，则将数据封装为 VO 类对象然后利用 List 集合返回，&lt;br&gt;</span></span><br><span class="line"><span class="hljs-comment">     * 如果没有数据，那么集合的长度为 0（size() == 0，不是 null）&lt;/&gt;</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception SQL 执行异常</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;V&gt; <span class="hljs-title">findAll</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 分页进行数据的模糊查询，查询结果以集合的形式返回</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> offset 数据行的偏移量</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> maxNum 数据行的最大数目</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> column 进行模糊查询的数据列</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> keyWord 模糊查询的关键字</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 中有数据，则将数据封装为 VO 类对象然后利用 List 集合返回，&lt;br&gt;</span></span><br><span class="line"><span class="hljs-comment">     * 如果没有数据，那么集合的长度为 0（size() == 0，不是 null）&lt;/&gt;</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception SQL 执行异常</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;V&gt; <span class="hljs-title">findAllSplit</span><span class="hljs-params">(Integer offset,Integer maxNum,String column,String keyWord)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 进行模糊查询数据量的统计，如果表中没有记录统计的结果就是 0</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> column 进行模糊查询的数据列</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> keyWord 模糊查询的关键字</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 返回表中的数据量，如果没有数据就返回 0</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception SQL 执行异常</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getAllCount</span><span class="hljs-params">(String column,String keyWord)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong>：定义 IEmpDAO 子接口</p>
<p><img src="Image_Java_58_DAO%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_%E5%88%86%E5%B1%82%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/2018-11-04-19-37-54.png" alt></p>
<ol start="3">
<li>定义 DeptDAOImpl 子类<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> cn.mldn.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> cn.mldn.dao.IDeptDAO;</span><br><span class="line"><span class="hljs-keyword">import</span> cn.mldn.vo.Dept;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="hljs-keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="hljs-keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.List;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DeptDAOImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IDeptDAO</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">private</span> Connection conn;</span><br><span class="line">    <span class="hljs-keyword">private</span> PreparedStatement pstmt;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">DeptDAOImpl</span><span class="hljs-params">(Connection conn)</span> </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">this</span>.conn = conn;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">doCreate</span><span class="hljs-params">(Dept vo)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        String sql = <span class="hljs-string">"INSERT INTO dept(deptno,dname,loc) VALUES(?,?,?)"</span>;</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt = <span class="hljs-keyword">this</span>.conn.prepareStatement(sql);</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setInt(<span class="hljs-number">1</span>,vo.getDeptno());</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setString(<span class="hljs-number">2</span>,vo.getDname());</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setString(<span class="hljs-number">3</span>,vo.getLoc());</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.pstmt.executeUpdate() &gt; <span class="hljs-number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">doUpdate</span><span class="hljs-params">(Dept vo)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        String sql = <span class="hljs-string">"UPDATE dept SET dname=?,loc=? WHERE deptno=?"</span>;</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt = <span class="hljs-keyword">this</span>.conn.prepareStatement(sql);</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setString(<span class="hljs-number">1</span>,vo.getDname());</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setString(<span class="hljs-number">2</span>,vo.getLoc());</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setInt(<span class="hljs-number">3</span>,vo.getDeptno());</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.pstmt.executeUpdate() &gt; <span class="hljs-number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">doRemoveBatch</span><span class="hljs-params">(Set&lt;Integer&gt; ids)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">if</span>(ids == <span class="hljs-keyword">null</span> || ids.size() == <span class="hljs-number">0</span>)&#123; <span class="hljs-comment">// 没有要删除的数据</span></span><br><span class="line">            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        StringBuffer sql = <span class="hljs-keyword">new</span> StringBuffer();</span><br><span class="line">        sql.append(<span class="hljs-string">"DELETE FROM dept WHERE deptno IN ("</span>);</span><br><span class="line">        Iterator&lt;Integer&gt; iter = ids.iterator();</span><br><span class="line">        <span class="hljs-keyword">while</span>(iter.hasNext())&#123;</span><br><span class="line">            sql.append(iter.next()).append(<span class="hljs-string">","</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        sql.delete(sql.length()-<span class="hljs-number">1</span>,sql.length()).append(<span class="hljs-string">")"</span>);</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt = <span class="hljs-keyword">this</span>.conn.prepareStatement(sql.toString());</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.pstmt.executeUpdate() == ids.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> Dept <span class="hljs-title">findById</span><span class="hljs-params">(Integer id)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Dept vo = <span class="hljs-keyword">null</span>;</span><br><span class="line">        String sql = <span class="hljs-string">"SELECT deptno,dname,loc FROM dept WHERE deptno=?"</span>;</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt = <span class="hljs-keyword">this</span>.conn.prepareStatement(sql);</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setInt(<span class="hljs-number">1</span>,id);</span><br><span class="line">        ResultSet rs = <span class="hljs-keyword">this</span>.pstmt.executeQuery();</span><br><span class="line">        <span class="hljs-keyword">while</span> (rs.next())&#123;</span><br><span class="line">            vo = <span class="hljs-keyword">new</span> Dept();</span><br><span class="line">            vo.setDeptno(rs.getInt(<span class="hljs-number">1</span>));</span><br><span class="line">            vo.setDname(rs.getString(<span class="hljs-number">2</span>));</span><br><span class="line">            vo.setLoc(rs.getString(<span class="hljs-number">3</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="hljs-keyword">return</span> vo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Dept&gt; <span class="hljs-title">findAll</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        List&lt;Dept&gt; all = <span class="hljs-keyword">new</span> ArrayList&lt;Dept&gt;();</span><br><span class="line">        String sql = <span class="hljs-string">"SELECT deptno,dname,loc FROM dept"</span>;</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt = <span class="hljs-keyword">this</span>.conn.prepareStatement(sql);</span><br><span class="line">        ResultSet rs = <span class="hljs-keyword">this</span>.pstmt.executeQuery();</span><br><span class="line">        <span class="hljs-keyword">while</span> (rs.next())&#123;</span><br><span class="line">            Dept vo = <span class="hljs-keyword">new</span> Dept();</span><br><span class="line">            vo.setDeptno(rs.getInt(<span class="hljs-number">1</span>));</span><br><span class="line">            vo.setDname(rs.getString(<span class="hljs-number">2</span>));</span><br><span class="line">            vo.setLoc(rs.getString(<span class="hljs-number">3</span>));</span><br><span class="line">            all.add(vo);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="hljs-keyword">return</span> all;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Dept&gt; <span class="hljs-title">findAllSplit</span><span class="hljs-params">(Integer offset, Integer maxNum, String column, String keyWord)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">         <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(<span class="hljs-string">"此方法未实现"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getAllCount</span><span class="hljs-params">(String column, String keyWord)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(<span class="hljs-string">"此方法未实现"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>对于未实现的方法：<br>抛出异常： <code>此方法未实现</code></p>
<ol start="4">
<li><p>修改 DAOFactory 类，增加新的接口对象取得方法</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> IDeptDAO <span class="hljs-title">getIDeptDAOInstance</span><span class="hljs-params">(Connection conn)</span></span>&#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> DeptDAOImpl(conn);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>开发 IDeptService 接口<br>业务层最好不要做方法抽象，因为面向用户，要保证所有的方法可用。</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> cn.mldn.service;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> cn.mldn.vo.Dept;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> java.util.List;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IDeptService</span> </span>&#123;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">insert</span><span class="hljs-params">(Dept vo)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">update</span><span class="hljs-params">(Dept vo)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">delete</span><span class="hljs-params">(Set&lt;Integer&gt; ids)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> Dept <span class="hljs-title">get</span><span class="hljs-params">(<span class="hljs-keyword">int</span> ids)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Dept&gt; <span class="hljs-title">list</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>实现 DeptServiceImpl 子类</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> cn.mldn.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> cn.mldn.dbc.DatabaseConnection;</span><br><span class="line"><span class="hljs-keyword">import</span> cn.mldn.factory.DAOFactory;</span><br><span class="line"><span class="hljs-keyword">import</span> cn.mldn.service.IDeptService;</span><br><span class="line"><span class="hljs-keyword">import</span> cn.mldn.vo.Dept;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> java.util.List;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DeptServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IDeptService</span></span>&#123;</span><br><span class="line">    <span class="hljs-keyword">private</span> DatabaseConnection dbc = <span class="hljs-keyword">new</span> DatabaseConnection();</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">insert</span><span class="hljs-params">(Dept vo)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">try</span>&#123;</span><br><span class="line">            <span class="hljs-comment">// 要增加的dept编号如果不存在，则 findById() 返回的结果就是 null，null 表示可以进行新数据的保存</span></span><br><span class="line">            <span class="hljs-keyword">if</span>(DAOFactory.getIDeptDAOInstance(<span class="hljs-keyword">this</span>.dbc.getConnection()).findById(vo.getDeptno()) == <span class="hljs-keyword">null</span>)&#123;</span><br><span class="line">                <span class="hljs-keyword">return</span> DAOFactory.getIDeptDAOInstance(<span class="hljs-keyword">this</span>.dbc.getConnection()).doCreate(vo);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;</span><br><span class="line">        &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            <span class="hljs-keyword">throw</span> e;</span><br><span class="line">        &#125;<span class="hljs-keyword">finally</span> &#123;</span><br><span class="line">            <span class="hljs-keyword">this</span>.dbc.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">update</span><span class="hljs-params">(Dept vo)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">try</span>&#123;</span><br><span class="line">            <span class="hljs-keyword">return</span> DAOFactory.getIDeptDAOInstance(<span class="hljs-keyword">this</span>.dbc.getConnection()).doUpdate(vo);</span><br><span class="line">        &#125;<span class="hljs-keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            <span class="hljs-keyword">throw</span> e;</span><br><span class="line">        &#125;<span class="hljs-keyword">finally</span> &#123;</span><br><span class="line">            <span class="hljs-keyword">this</span>.dbc.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">delete</span><span class="hljs-params">(Set&lt;Integer&gt; ids)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">            <span class="hljs-keyword">return</span> DAOFactory.getIDeptDAOInstance(<span class="hljs-keyword">this</span>.dbc.getConnection()).doRemoveBatch(ids);</span><br><span class="line">        &#125;<span class="hljs-keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            <span class="hljs-keyword">throw</span> e;</span><br><span class="line">        &#125;<span class="hljs-keyword">finally</span> &#123;</span><br><span class="line">            <span class="hljs-keyword">this</span>.dbc.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> Dept <span class="hljs-title">get</span><span class="hljs-params">(<span class="hljs-keyword">int</span> ids)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">try</span>&#123;</span><br><span class="line">            <span class="hljs-keyword">return</span> DAOFactory.getIDeptDAOInstance(<span class="hljs-keyword">this</span>.dbc.getConnection()).findById(ids);</span><br><span class="line">        &#125;<span class="hljs-keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            <span class="hljs-keyword">throw</span> e;</span><br><span class="line">        &#125;<span class="hljs-keyword">finally</span>&#123;</span><br><span class="line">            <span class="hljs-keyword">this</span>.dbc.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Dept&gt; <span class="hljs-title">list</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">try</span>&#123;</span><br><span class="line">            <span class="hljs-keyword">return</span> DAOFactory.getIDeptDAOInstance(<span class="hljs-keyword">this</span>.dbc.getConnection()).findAll();</span><br><span class="line">        &#125;<span class="hljs-keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            <span class="hljs-keyword">throw</span> e;</span><br><span class="line">        &#125;<span class="hljs-keyword">finally</span> &#123;</span><br><span class="line">            <span class="hljs-keyword">this</span>.dbc.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改服务层工厂类</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> IDeptService <span class="hljs-title">getIDeptServiceInstance</span><span class="hljs-params">()</span> </span>&#123; </span><br><span class="line">     <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> DeptServiceImpl(); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="14-处理关系（了解）"><a href="#14-处理关系（了解）" class="headerlink" title="14. 处理关系（了解）"></a>14. 处理关系（了解）</h4><p>已经实现了雇员和部门的基础操作，但是在雇员里面存在有 mgr 和 deptno 两个关联对象，修改 VO 类的定义；</p>
<ul>
<li><p>修改 Emp.java 类，SQL 数据表也要变化</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">private</span> Emp mgr;</span><br><span class="line"><span class="hljs-keyword">private</span> Dept dept;</span><br><span class="line"><span class="hljs-comment">// 增加这两个属性及其 setter、getter 方法</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>修改 Dept.java 类</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">private</span> List&lt;Emp&gt; emps;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Emp&gt; <span class="hljs-title">getEmps</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> emps;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setEmps</span><span class="hljs-params">(List&lt;Emp&gt; emps)</span> </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">this</span>.emps = emps;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>增加数据要变化：</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">doCreate</span><span class="hljs-params">(Emp vo)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        String sql = <span class="hljs-string">"INSERT INTO emp(empno,ename,job,hiredate,sal,comm,mgr,dept) VALUES(?,?,?,?,?,?,?,?)"</span>;</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt = <span class="hljs-keyword">this</span>.conn.prepareStatement(sql);</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setInt(<span class="hljs-number">1</span>,vo.getEmpno());</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setString(<span class="hljs-number">2</span>,vo.getEname());</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setString(<span class="hljs-number">3</span>,vo.getJob());</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setDate(<span class="hljs-number">4</span>,<span class="hljs-keyword">new</span> java.sql.Date(vo.getHiredate().getTime()));</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setDouble(<span class="hljs-number">5</span>,vo.getSal());</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setDouble(<span class="hljs-number">6</span>,vo.getComm());</span><br><span class="line">        <span class="hljs-keyword">if</span>(vo.getMgr() == <span class="hljs-keyword">null</span>)&#123;    <span class="hljs-comment">// 未设置领导数据</span></span><br><span class="line">            <span class="hljs-keyword">this</span>.pstmt.setNull(<span class="hljs-number">7</span>, Type.NULL);</span><br><span class="line">        &#125;<span class="hljs-keyword">else</span>&#123;</span><br><span class="line">            <span class="hljs-keyword">this</span>.pstmt.setInt(<span class="hljs-number">7</span>,vo.getMgr().getEmpno());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="hljs-keyword">if</span>(vo.getDept() == <span class="hljs-keyword">null</span>)&#123;</span><br><span class="line">            <span class="hljs-keyword">this</span>.pstmt.setNull(<span class="hljs-number">8</span>, Type.NULL);</span><br><span class="line">        &#125;<span class="hljs-keyword">else</span>&#123;</span><br><span class="line">            <span class="hljs-keyword">this</span>.pstmt.setInt(<span class="hljs-number">8</span>,vo.getDept().getDeptno());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.pstmt.executeUpdate() &gt; <span class="hljs-number">0</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>修改数据也要变化：</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">doUpdate</span><span class="hljs-params">(Emp vo)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        String sql = <span class="hljs-string">"UPDATE emp SET ename=?,job=?,hiredate=?,sal=?,comm=?,mgr=?,dept=? WHERE empno=?"</span>;</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt = <span class="hljs-keyword">this</span>.conn.prepareStatement(sql);</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setString(<span class="hljs-number">1</span>,vo.getEname());</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setString(<span class="hljs-number">2</span>,vo.getJob());</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setDate(<span class="hljs-number">3</span>,<span class="hljs-keyword">new</span> java.sql.Date(vo.getHiredate().getTime()));</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setDouble(<span class="hljs-number">4</span>,vo.getSal());</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setDouble(<span class="hljs-number">5</span>,vo.getComm());</span><br><span class="line">        <span class="hljs-keyword">if</span>(vo.getMgr() == <span class="hljs-keyword">null</span>)&#123;    <span class="hljs-comment">// 未设置领导数据</span></span><br><span class="line">            <span class="hljs-keyword">this</span>.pstmt.setNull(<span class="hljs-number">6</span>, Type.NULL);</span><br><span class="line">        &#125;<span class="hljs-keyword">else</span>&#123;</span><br><span class="line">            <span class="hljs-keyword">this</span>.pstmt.setInt(<span class="hljs-number">6</span>,vo.getMgr().getEmpno());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="hljs-keyword">if</span>(vo.getDept() == <span class="hljs-keyword">null</span>)&#123;</span><br><span class="line">            <span class="hljs-keyword">this</span>.pstmt.setNull(<span class="hljs-number">7</span>, Type.NULL);</span><br><span class="line">        &#125;<span class="hljs-keyword">else</span>&#123;</span><br><span class="line">            <span class="hljs-keyword">this</span>.pstmt.setInt(<span class="hljs-number">7</span>,vo.getDept().getDeptno());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setInt(<span class="hljs-number">8</span>,vo.getEmpno());</span><br><span class="line"></span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.pstmt.executeUpdate() &gt; <span class="hljs-number">0</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>查询单个雇员信息的时候也要进行全部内容的查询。需要进行多表查询，那么在 IEmpDAO 中扩充功能。</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IEmpDAO</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">IDAO</span>&lt;<span class="hljs-title">Integer</span>,<span class="hljs-title">Emp</span>&gt;</span>&#123;</span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 查询雇员的详细信息，包括雇员对应的领导信息和所在部门的信息</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id 要查询的雇员编号</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 所有的数据以 VO 对象返回，如果没有则返回 null</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception SQL 异常</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> Emp <span class="hljs-title">findByIdDetails</span><span class="hljs-params">(Integer id)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 查询雇员的完整信息</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 所有的数据对象以 List 集合返回，如果没有数据集合长度为 0（size == 0）</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception SQL 查询错误</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Emp&gt; <span class="hljs-title">findAllDetails</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * 分页进行数据的模糊查询，查询结果以集合的形式返回</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> offset 数据行的偏移量</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> maxNum 数据行的最大数目</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> column 进行模糊查询的数据列</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> keyWord 模糊查询的关键字</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 中有数据，则将数据封装为 VO 类对象然后利用 List 集合返回，&lt;br&gt;</span></span><br><span class="line"><span class="hljs-comment">     * 如果没有数据，那么集合的长度为 0（size() == 0，不是 null）&lt;/&gt;</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception SQL 执行异常</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Emp&gt; <span class="hljs-title">findAllSplitDetails</span><span class="hljs-params">(Integer offset,Integer maxNum,String column,String keyWord)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实现细节：</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> Emp <span class="hljs-title">findByIdDetails</span><span class="hljs-params">(Integer id)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Emp vo = <span class="hljs-keyword">null</span>;</span><br><span class="line">        String sql = <span class="hljs-string">"SELECT e.ename,e.job,e.hiredate,e.sal,e.comm, "</span> +</span><br><span class="line">                <span class="hljs-string">"m.empno,m.ename, "</span> +</span><br><span class="line">                <span class="hljs-string">"d.deptno,d.name,d.loc "</span>+</span><br><span class="line">                <span class="hljs-string">"FROM emp e,emp m,dept d "</span> +</span><br><span class="line">                <span class="hljs-string">"WHERE e.mgr=m.empno AND e.dept=d.deptno AND e.empno=?"</span>;</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt = <span class="hljs-keyword">this</span>.conn.prepareStatement(sql);</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setInt(<span class="hljs-number">1</span>,id);</span><br><span class="line">        ResultSet rs = <span class="hljs-keyword">this</span>.pstmt.executeQuery();</span><br><span class="line">        <span class="hljs-keyword">while</span>(rs.next())&#123;</span><br><span class="line">            vo = <span class="hljs-keyword">new</span> Emp();</span><br><span class="line">            vo.setEname(rs.getString(<span class="hljs-number">1</span>));</span><br><span class="line">            vo.setJob(rs.getString(<span class="hljs-number">2</span>));</span><br><span class="line">            vo.setHiredate(rs.getDate(<span class="hljs-number">3</span>));</span><br><span class="line">            vo.setSal(rs.getDouble(<span class="hljs-number">4</span>));</span><br><span class="line">            vo.setComm(rs.getDouble(<span class="hljs-number">5</span>));</span><br><span class="line">            Emp mgr = <span class="hljs-keyword">new</span> Emp();</span><br><span class="line">            mgr.setEmpno(rs.getInt(<span class="hljs-number">6</span>));</span><br><span class="line">            mgr.setEname(rs.getString(<span class="hljs-number">7</span>));</span><br><span class="line">            vo.setMgr(mgr);</span><br><span class="line">            Dept dept = <span class="hljs-keyword">new</span> Dept();</span><br><span class="line">            dept.setDeptno(rs.getInt(<span class="hljs-number">8</span>));</span><br><span class="line">            dept.setDname(rs.getString(<span class="hljs-number">9</span>));</span><br><span class="line">            dept.setLoc(rs.getString(<span class="hljs-number">10</span>));</span><br><span class="line">            vo.setDept(dept);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="hljs-keyword">return</span> vo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Emp&gt; <span class="hljs-title">findAllDetails</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        List&lt;Emp&gt; all = <span class="hljs-keyword">new</span> ArrayList&lt;Emp&gt;();</span><br><span class="line">        String sql = <span class="hljs-string">"SELECT e.empno,e.ename,e.job,e.hiredate,e.sal,e.comm, "</span> +</span><br><span class="line">                <span class="hljs-string">"m.empno,m.ename, "</span> +</span><br><span class="line">                <span class="hljs-string">"d.deptno,d.name,d.loc "</span>+</span><br><span class="line">                <span class="hljs-string">"FROM emp e,emp m,dept d "</span> +</span><br><span class="line">                <span class="hljs-string">"WHERE e.mgr=m.empno AND e.dept=d.deptno"</span>;</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt = <span class="hljs-keyword">this</span>.conn.prepareStatement(sql);</span><br><span class="line">        ResultSet rs = <span class="hljs-keyword">this</span>.pstmt.executeQuery();</span><br><span class="line">        <span class="hljs-keyword">while</span>(rs.next())&#123;</span><br><span class="line">            Emp vo = <span class="hljs-keyword">new</span> Emp();</span><br><span class="line">            vo.setEmpno(rs.getInt(<span class="hljs-number">1</span>));</span><br><span class="line">            vo.setEname(rs.getString(<span class="hljs-number">2</span>));</span><br><span class="line">            vo.setJob(rs.getString(<span class="hljs-number">3</span>));</span><br><span class="line">            vo.setHiredate(rs.getDate(<span class="hljs-number">4</span>));</span><br><span class="line">            vo.setSal(rs.getDouble(<span class="hljs-number">5</span>));</span><br><span class="line">            vo.setComm(rs.getDouble(<span class="hljs-number">6</span>));</span><br><span class="line">            Emp mgr = <span class="hljs-keyword">new</span> Emp();</span><br><span class="line">            mgr.setEmpno(rs.getInt(<span class="hljs-number">7</span>));</span><br><span class="line">            mgr.setEname(rs.getString(<span class="hljs-number">8</span>));</span><br><span class="line">            vo.setMgr(mgr);</span><br><span class="line">            Dept dept = <span class="hljs-keyword">new</span> Dept();</span><br><span class="line">            dept.setDeptno(rs.getInt(<span class="hljs-number">9</span>));</span><br><span class="line">            dept.setDname(rs.getString(<span class="hljs-number">10</span>));</span><br><span class="line">            dept.setLoc(rs.getString(<span class="hljs-number">11</span>));</span><br><span class="line">            vo.setDept(dept);</span><br><span class="line">            all.add(vo);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="hljs-keyword">return</span> all;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Emp&gt; <span class="hljs-title">findAllSplitDetails</span><span class="hljs-params">(Integer offset, Integer maxNum, String column, String keyWord)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        List&lt;Emp&gt; all = <span class="hljs-keyword">new</span> ArrayList&lt;Emp&gt;();</span><br><span class="line">        String sql = <span class="hljs-string">"SELECT * FROM( "</span> +</span><br><span class="line">                <span class="hljs-string">" SELECT e.empno,e.ename,e.job,e.hiredate,e.sal,e.comm, "</span> +</span><br><span class="line">                <span class="hljs-string">" m.empno mno,m.ename mname,d.deptno dno,d.dname,d.loc "</span>+</span><br><span class="line">                <span class="hljs-string">" FROM emp e,emp m,dept d "</span> +</span><br><span class="line">                <span class="hljs-string">" WHERE e.mgr=m.empno AND e.dept=d.deptno "</span> +</span><br><span class="line">                <span class="hljs-string">" AND e."</span> + column + <span class="hljs-string">" LIKE ?) as total "</span> +</span><br><span class="line">                <span class="hljs-string">" LIMIT ?,? "</span>;</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt = <span class="hljs-keyword">this</span>.conn.prepareStatement(sql);</span><br><span class="line"></span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setString(<span class="hljs-number">1</span>,<span class="hljs-string">"%"</span>+keyWord+<span class="hljs-string">"%"</span>);</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setInt(<span class="hljs-number">2</span>,offset);</span><br><span class="line">        <span class="hljs-keyword">this</span>.pstmt.setInt(<span class="hljs-number">3</span>,maxNum);</span><br><span class="line">        ResultSet rs = <span class="hljs-keyword">this</span>.pstmt.executeQuery();</span><br><span class="line">        <span class="hljs-keyword">while</span>(rs.next())&#123;</span><br><span class="line">            Emp vo = <span class="hljs-keyword">new</span> Emp();</span><br><span class="line">            vo.setEmpno(rs.getInt(<span class="hljs-number">1</span>));</span><br><span class="line">            vo.setEname(rs.getString(<span class="hljs-number">2</span>));</span><br><span class="line">            vo.setJob(rs.getString(<span class="hljs-number">3</span>));</span><br><span class="line">            vo.setHiredate(rs.getDate(<span class="hljs-number">4</span>));</span><br><span class="line">            vo.setSal(rs.getDouble(<span class="hljs-number">5</span>));</span><br><span class="line">            vo.setComm(rs.getDouble(<span class="hljs-number">6</span>));</span><br><span class="line">            Emp mgr = <span class="hljs-keyword">new</span> Emp();</span><br><span class="line">            mgr.setEmpno(rs.getInt(<span class="hljs-number">7</span>));</span><br><span class="line">            mgr.setEname(rs.getString(<span class="hljs-number">8</span>));</span><br><span class="line">            vo.setMgr(mgr);</span><br><span class="line">            Dept dept = <span class="hljs-keyword">new</span> Dept();</span><br><span class="line">            dept.setDeptno(rs.getInt(<span class="hljs-number">9</span>));</span><br><span class="line">            dept.setDname(rs.getString(<span class="hljs-number">10</span>));</span><br><span class="line">            dept.setLoc(rs.getString(<span class="hljs-number">11</span>));</span><br><span class="line">            vo.setDept(dept);</span><br><span class="line">            all.add(vo);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="hljs-keyword">return</span> all;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>修改服务层接口，IEmpService：这里为了简单，只实现了一个方法接口</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">public</span> Map&lt;String,Object&gt; <span class="hljs-title">listDetails</span><span class="hljs-params">(<span class="hljs-keyword">int</span> offset,<span class="hljs-keyword">int</span> maxNum,String column,String keyWord)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br></pre></td></tr></table></figure>

<p>修改服务层实现 EmpServiceImpl：</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title">listDetails</span><span class="hljs-params">(<span class="hljs-keyword">int</span> offset, <span class="hljs-keyword">int</span> maxNum, String column, String keyWord)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">try</span>&#123;</span><br><span class="line">            Map&lt;String,Object&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line">            map.put(<span class="hljs-string">"allEmps"</span>,DAOFactory.getIEmpDAOInstance(<span class="hljs-keyword">this</span>.dbc.getConnection()).findAllSplitDetails(offset,maxNum,column,keyWord));</span><br><span class="line">            map.put(<span class="hljs-string">"empCount"</span>,DAOFactory.getIEmpDAOInstance(<span class="hljs-keyword">this</span>.dbc.getConnection()).getAllCount(column,keyWord));</span><br><span class="line">            <span class="hljs-keyword">return</span> map;</span><br><span class="line">        &#125;<span class="hljs-keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            <span class="hljs-keyword">throw</span> e;</span><br><span class="line">        &#125;<span class="hljs-keyword">finally</span>&#123;</span><br><span class="line">            <span class="hljs-keyword">this</span>.dbc.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
        </div>
        
        <div class="level is-size-7 is-uppercase">
            <div class="level-start">
                <div class="level-item">
                    <span class="is-size-6 has-text-grey has-mr-7">#</span>
                    <a class="has-link-grey -link" href="/tags/Java/">Java</a>
                </div>
            </div>
        </div>
        
        
        
    </div>
</div>





<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        <div class="level-start">
            <a class="level level-item has-link-grey  article-nav-prev" href="/2018/11/05/Hexo/">
                <i class="level-item fas fa-chevron-left"></i>
                <span class="level-item">Hexo 学习笔记</span>
            </a>
        </div>
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/2018/11/05/Java_57_Java数据库编程_JDBC/">
                <span class="level-item">Chapter 57 类集框架</span>
                <i class="level-item fas fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>


</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered" style="flex-shrink: 1">
                <div>
                    
                    <figure class="image is-128x128 has-mb-6">
                        <img class="" src="/images/avatar.png" alt="fjiao">
                    </figure>
                    
                    <p class="is-size-4 is-block">
                        fjiao
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        姣姣的个人主页
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>BeiJing</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Posts
                    </p>
                    <p class="title has-text-weight-normal">
                        34
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Categories
                    </p>
                    <p class="title has-text-weight-normal">
                        4
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Tags
                    </p>
                    <p class="title has-text-weight-normal">
                        11
                    </p>
                </div>
            </div>
        </nav>
        
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/fjiao9614/fjiao9614.github.io" target="_blank">
                Follow</a>
        </div>
        
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="Github" href="https://github.com/fjiao9614">
                
                <i class="fab fa-github"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="Facebook" href="https://facebook.com">
                
                <i class="fab fa-facebook"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="Twitter" href="https://twitter.com">
                
                <i class="fab fa-twitter"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Links
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://hexo.io" target="_blank">
                    <span class="level-left">
                        <span class="level-item">Hexo</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">hexo.io</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://github.com/fjiao9614" target="_blank">
                    <span class="level-left">
                        <span class="level-item">PPOffice</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>

    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Categories
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/Hexo-入门/">
            <span class="level-start">
                <span class="level-item">Hexo 入门</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Java8-编程开发入门笔记/">
            <span class="level-start">
                <span class="level-item">Java8 编程开发入门笔记</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">18</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/心得体会/">
            <span class="level-start">
                <span class="level-item">心得体会</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/调研报告/">
            <span class="level-start">
                <span class="level-item">调研报告</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Tag Cloud
        </h3>
        <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Linux/" style="font-size: 13.33px;">Linux</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/Spring/" style="font-size: 10px;">Spring</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/算法/" style="font-size: 16.67px;">算法</a> <a href="/tags/调研/" style="font-size: 10px;">调研</a> <a href="/tags/面试/" style="font-size: 10px;">面试</a> <a href="/tags/项目/" style="font-size: 10px;">项目</a>
    </div>
</div>
    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2019/10/29/python的主函数main的作用/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="[object Object]">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-29T08:37:50.850Z">2019-10-29</time></div>
                    <a href="/2019/10/29/python的主函数main的作用/" class="title has-link-black-ter is-size-6 has-text-weight-normal">[object Object]</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/28/Linux安装MySQL/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="[object Object]">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-28T09:04:49.709Z">2019-10-28</time></div>
                    <a href="/2019/10/28/Linux安装MySQL/" class="title has-link-black-ter is-size-6 has-text-weight-normal">[object Object]</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/28/java中的参数传递类型/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-28T02:26:30.818Z">2019-10-28</time></div>
                    <a href="/2019/10/28/java中的参数传递类型/" class="title has-link-black-ter is-size-6 has-text-weight-normal"></a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/25/剑指offer/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="[object Object]">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-25T11:22:38.059Z">2019-10-25</time></div>
                    <a href="/2019/10/25/剑指offer/" class="title has-link-black-ter is-size-6 has-text-weight-normal">[object Object]</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/25/快速幂/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="[object Object]">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-25T04:29:27.414Z">2019-10-25</time></div>
                    <a href="/2019/10/25/快速幂/" class="title has-link-black-ter is-size-6 has-text-weight-normal">[object Object]</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/10/">
                <span class="level-start">
                    <span class="level-item">October 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">12</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">October 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">17</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Tags
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Hexo/">
                        <span class="tag">Hexo</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Java/">
                        <span class="tag">Java</span>
                        <span class="tag is-grey">18</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Linux/">
                        <span class="tag">Linux</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MySQL/">
                        <span class="tag">MySQL</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Spring/">
                        <span class="tag">Spring</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/git/">
                        <span class="tag">git</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/python/">
                        <span class="tag">python</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/算法/">
                        <span class="tag">算法</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/调研/">
                        <span class="tag">调研</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/面试/">
                        <span class="tag">面试</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/项目/">
                        <span class="tag">项目</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2019/10/29/python的主函数main的作用/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="[object Object]">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-29T08:37:50.850Z">2019-10-29</time></div>
                    <a href="/2019/10/29/python的主函数main的作用/" class="title has-link-black-ter is-size-6 has-text-weight-normal">[object Object]</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/28/Linux安装MySQL/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="[object Object]">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-28T09:04:49.709Z">2019-10-28</time></div>
                    <a href="/2019/10/28/Linux安装MySQL/" class="title has-link-black-ter is-size-6 has-text-weight-normal">[object Object]</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/28/java中的参数传递类型/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-28T02:26:30.818Z">2019-10-28</time></div>
                    <a href="/2019/10/28/java中的参数传递类型/" class="title has-link-black-ter is-size-6 has-text-weight-normal"></a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/25/剑指offer/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="[object Object]">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-25T11:22:38.059Z">2019-10-25</time></div>
                    <a href="/2019/10/25/剑指offer/" class="title has-link-black-ter is-size-6 has-text-weight-normal">[object Object]</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/25/快速幂/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="[object Object]">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-25T04:29:27.414Z">2019-10-25</time></div>
                    <a href="/2019/10/25/快速幂/" class="title has-link-black-ter is-size-6 has-text-weight-normal">[object Object]</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/10/">
                <span class="level-start">
                    <span class="level-item">October 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">12</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">October 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">17</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Tags
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Hexo/">
                        <span class="tag">Hexo</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Java/">
                        <span class="tag">Java</span>
                        <span class="tag is-grey">18</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Linux/">
                        <span class="tag">Linux</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MySQL/">
                        <span class="tag">MySQL</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Spring/">
                        <span class="tag">Spring</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/git/">
                        <span class="tag">git</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/python/">
                        <span class="tag">python</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/算法/">
                        <span class="tag">算法</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/调研/">
                        <span class="tag">调研</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/面试/">
                        <span class="tag">面试</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/项目/">
                        <span class="tag">项目</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.png" alt="Chapter 58 DAO设计模式_分层设计思想" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2019 fjiao&nbsp;
                Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> & <a
                        href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>
                
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Download on GitHub" href="https://github.com/fjiao9614/fjiao9614.github.io">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("en");</script>

<script>
var IcarusThemeSettings = {
    article: {
        highlight: {
            clipboard: true,
            fold: 'unfolded'
        }
    }
};
</script>


    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>



    
    
<script src="/js/animation.js"></script>

    
    
<script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
<script src="/js/gallery.js" defer></script>

    
    
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>

    
    <script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>
    
    
<a id="back-to-top" title="Back to Top" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>

    
    
    
    
    
    
    
    
    
    
    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>